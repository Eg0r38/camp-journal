<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>–í–ñ ‚Ä¢ –º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #0078d4; --primary-dark: #005a9e; --success: #28a745;
            --danger: #dc3545; --warning: #ffc107; --info: #17a2b8;
            --dark: #1a1f2e; --darker: #0f121c; --light: #2a2f3e;
            --lighter: #383e4e; --text: #eaeef2; --text-muted: #9aa4b8;
            --completed: #6f42c1; --bg-page: #0a0c14; --border: #3a3f4e;
        }
        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-page); color: var(--text);
            padding: 12px 10px 70px; min-height: 100vh;
        }
        .vj-logo {
            position: fixed; top: 10px; left: 12px; width: 46px; height: 46px;
            background: var(--primary); border-radius: 18px;
            display: flex; align-items: center; justify-content: center;
            font-size: 22px; font-weight: 700; color: white;
            box-shadow: 0 6px 14px rgba(0,120,212,0.5); z-index: 1100;
            border: 2px solid rgba(255,255,255,0.15); cursor: pointer;
        }
        .top-bar {
            position: fixed; top: 10px; right: 12px; left: 70px;
            display: flex; gap: 6px; z-index: 1100; justify-content: flex-end;
        }
        .user-info {
            background: var(--dark); padding: 6px 12px; border-radius: 40px;
            font-size: 13px; display: flex; align-items: center; gap: 8px;
            border: 1px solid var(--border);
        }
        .connection-status {
            background: #1e3a2a; color: #8bc34a; padding: 6px 14px;
            border-radius: 40px; font-size: 13px; border: 1px solid #2d4a36;
            cursor: pointer;
        }
        .connection-status.demo { background: #3a2e1e; color: #ffb74d; border-color: #4a3a2d; }
        .auth-card {
            background: var(--dark); border-radius: 32px; padding: 28px 20px;
            max-width: 400px; margin: 80px auto; border: 1px solid var(--border);
        }
        .app-container {
            background: var(--dark); border-radius: 30px; padding: 20px 16px;
            margin-top: 80px; border: 1px solid var(--border);
        }
        input, select, button {
            width: 100%; padding: 16px; margin: 5px 0;
            background: var(--light); border: 1px solid var(--border);
            border-radius: 40px; color: white; font-size: 16px;
        }
        button {
            background: var(--primary); font-weight: 600; cursor: pointer;
        }
        .btn-success { background: var(--success); }
        .menu-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;
            margin: 20px 0;
        }
        .menu-grid button {
            padding: 12px 4px; background: var(--light); border: 1px solid var(--border);
            border-radius: 22px; font-size: 13px; min-height: 70px;
        }
        .card {
            background: var(--light); border-radius: 28px; padding: 18px;
            margin-bottom: 14px; border: 1px solid var(--border);
        }
        .participant-card {
            background: var(--light); border-radius: 28px; padding: 18px;
            margin-bottom: 14px; border: 1px solid var(--border);
        }
        .badge {
            background: var(--primary); padding: 4px 12px; border-radius: 30px;
            font-size: 11px;
        }
        .demo-badge {
            background: var(--info); padding: 2px 8px; border-radius: 20px;
            font-size: 10px; margin-left: 6px;
        }
        .page { display: none; }
        .page.active { display: block; }
        .flex-row { display: flex; gap: 8px; align-items: center; }
        .no-data { text-align: center; padding: 30px; color: var(--text-muted); }
    </style>
</head>
<body>
    <div class="vj-logo" onclick="showPage('studentsPage')">–í–ñ</div>
    <div class="top-bar">
        <div class="user-info" id="userInfo" style="display:none;">
            <span id="userName"></span>
            <span class="badge" id="userRole"></span>
            <span class="demo-badge" id="demoBadge" style="display:none;">demo</span>
        </div>
        <div class="connection-status" id="connectionStatus" onclick="checkConnection()">üîÑ</div>
    </div>

    <div id="authContainer">
        <div class="auth-card">
            <h2 style="text-align:center; margin-bottom:20px;">üì± –í–ñ –º–æ–±–∞–π–ª</h2>
            <button onclick="demoLogin()" style="margin-bottom:10px;">üöÄ –î–µ–º–æ-—Ä–µ–∂–∏–º</button>
            <button onclick="showLoginForm()">üîê –í—Ö–æ–¥</button>
            <div id="loginForm" style="display:none; margin-top:15px;">
                <input type="text" id="loginUsername" placeholder="–õ–æ–≥–∏–Ω">
                <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                <button onclick="login()">–í–æ–π—Ç–∏</button>
                <button onclick="hideLoginForm()" style="background:var(--lighter)">–ù–∞–∑–∞–¥</button>
            </div>
            <p style="text-align:center; margin-top:20px; color:var(--text-muted);" onclick="fillAdmin()">üëë admin</p>
        </div>
    </div>

    <div id="appContainer" style="display:none;">
        <div class="app-container">
            <div class="menu-grid" id="menuGrid"></div>
            <div class="page active" id="studentsPage">
                <h3>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
                <div id="studentsList" class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let isDemoMode = false;
        let data = { groups: {}, members: {} };

        function showToast(msg) { alert(msg); }
        function checkConnection() {
            let el = document.getElementById('connectionStatus');
            el.className = isDemoMode ? 'connection-status demo' : 'connection-status';
            el.innerHTML = isDemoMode ? 'üü° –¥–µ–º–æ' : 'üî¥ –æ—Ñ–ª–∞–π–Ω';
        }
        function showLoginForm() { document.getElementById('loginForm').style.display = 'block'; }
        function hideLoginForm() { document.getElementById('loginForm').style.display = 'none'; }
        function fillAdmin() {
            document.getElementById('loginUsername').value = '–ï–≥–æ—Ä';
            document.getElementById('loginPassword').value = '382154';
        }

        function demoLogin() {
            currentUser = { id: 999, username: '–î–µ–º–æ', role: 'admin' };
            isDemoMode = true;
            data = {
                groups: { '–û—Ç—Ä—è–¥ 1': {}, '–û—Ç—Ä—è–¥ 2': {} },
                members: {
                    '–û—Ç—Ä—è–¥ 1': [
                        { id: 1, name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', phone: '+7 999 123-45-67' },
                        { id: 2, name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞', phone: '+7 999 234-56-78' }
                    ]
                }
            };
            showApp();
        }

        function login() {
            let u = document.getElementById('loginUsername').value;
            let p = document.getElementById('loginPassword').value;
            if (u === '–ï–≥–æ—Ä' && p === '382154') demoLogin();
            else alert('–ù–µ–≤–µ—Ä–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ');
        }

        function logout() {
            currentUser = null; isDemoMode = false;
            document.getElementById('authContainer').style.display = 'block';
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('userInfo').style.display = 'none';
        }

        function showApp() {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('userName').textContent = currentUser.username;
            document.getElementById('userRole').textContent = currentUser.role;
            if (isDemoMode) document.getElementById('demoBadge').style.display = 'inline-block';
            checkConnection();
            renderStudents();
        }

        function renderStudents() {
            let html = '';
            for (let group in data.members) {
                data.members[group].forEach(s => {
                    html += `<div class="participant-card">
                        <strong>${s.name}</strong>
                        <div>üìû ${s.phone || '–Ω–µ—Ç'}</div>
                        <div>üë• ${group}</div>
                    </div>`;
                });
            }
            document.getElementById('studentsList').innerHTML = html || '<div class="no-data">–ù–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>';
        }

        function showPage(p) {}
    </script>
</body>
</html>